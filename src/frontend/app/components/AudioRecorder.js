import React, { Component } from 'react'

require('.styles.scss')

class AudioRecorder extends Component {
    constructor(props) {
        super(props)
        this.state = {
            isRecording: false,
            recordingStarted: false,
            recordingStopped: false
        }
    }

    stopRecording= () => {
        this.setState({ isRecording: false })
    }

    onSave=(blob) => {
        this.setState({
            download
        })
    }

    startRecording= () => {
        this.setState({
            isRecording: true,
            recordingInSession: true,
            recordingStarted: true,
            recordingStopped: false,
            isPaused: false
        })
    }

    stopRecording=() => {
        this.setState({
            isRecording: false,
            recordingInSession: false,
            recordingStarted: false,
            recordingStopped: true
        })
    }

    render() {
        const {
            blobURL,
            downloadLinkURL,
            isRecording,
            recordingInSession,
            recordingStarted,
            recordingStopped
        } = this.state
        const recordBtn = recordingInSession ? "fa disabled fa-record-vinyl fa-fw" : "fa fa-record-vinyl fa-fw"
        const stopBtn = !recordingStarted ? "fa disabled fa-stop-circle" : "fa fa-stop-circle"

        return (
            <div>
            <div id="project-wrapper">
              <div id="project-container">
                <div id="overlay" />
                <div id="content">
                  <h2>React-Mic</h2>
                  <h3>Record Audio As A WebM Audio File</h3>
                  <Microphone
                    className="oscilloscope"
                    record={isRecording}
                    backgroundColor="#333333"
                    visualSetting="sinewave"
                    audioBitsPerSecond={128000}
                    onStop={this.onStop}
                    onStart={this.onStart}
                    onSave={this.onSave}
                    onData={this.onData}
                    onBlock={this.onBlock}
                    onPause={this.onPause}
                    strokeColor="#0096ef"
                  />
                  <div id="oscilloscope-scrim">
                    {!recordingInSession && <div id="scrim" />}
                  </div>
                  <div id="controls">
                    <div className="column active">
                      <i
                        onClick={this.startRecording}
                        className={recordBtn}
                        aria-hidden="true"
                      />
                    </div>
                    <div className="column">
                      <i
                        onClick={this.stopRecording}
                        className={stopBtn}
                        aria-hidden="true"
                      />
                    </div>
                    <div className="column download">
                      <a
                        className={downloadLink}
                        href={downloadLinkURL}
                        download={`recording.webm`}
                      />
                    </div>
                  </div>
                </div>
                <div id="audio-playback-controls">
                  <audio ref="audioSource" controls="controls" src={blobURL} controlsList="nodownload"/>
                </div>
              </div>
            </div>
            <div>
              <p>If you want to record audio on ALL devices (iOS, Android, Desktop),
              then get your copy of <a href="https://react-mic-gold.professionalreactapp.com/sales-page34701298">React-Mic-Gold</a>!  You can save audio as MP3 or WAV files, and you can pause recordings.
              </p>
              <p>You can also get the <a href="https://hackingbeautyllc.clickfunnels.com/sales-page31558494">Voice Record Pro App Template</a> and develop any audio recording, speech recognition, voice activation, or language-learning app you could imagine.</p>
              <p>Need help?  Join the <a href="https://hackingbeauty-slack-invite.herokuapp.com
    " target="_blank">Slack Channel</a>.</p>
            </div>
          </div>
        )
    }
}

export default AudioRecorder
